{% extends "base.html" %}
{% block content %}
<!-- search bar -->
<div class="container">
<div id="search-bar" class="row center-align cyan accent-3">
<form action="{{ url_for('search')}}" method="post" class="col s12">
<div class="row valign-wrapper center-align">
<div class="input-field col s12 m8">
<i class="fas fa-search prefix white-text"></i>
<input type="text" id="query" name="query" minlength="3" class="validate" required>
<label for="query" class="white-text">Search Events</label>
</div>
<div class="col s12 m4">
          <button class="btn light-green accent-2" type="submit">
          Search
<i class="fas fa-search left"></i></button>
        <a href="{{ url_for('get_events') }}" class="btn white cyan-text text-accent-3">
        Clear</a>
</div>
</div>
</form>
</div>
</div> 
{% if events|length > 0 %}
<div class="row">
<ul class="collapsible">
  {% for event in events %}
  <div class="col s12 m3">
    <div class="card">
      <div class="card-image">
        {% if event.category_name == "Cycle" %}
        <img src="{{ url_for('static', filename='images/cycle.jpg') }}" />
        {% else %} {% if event.category_name == "Coffee" %}
        <img src="{{ url_for('static', filename='images/coffee.jpg') }}" />
        {% else %} {% if event.category_name == "Walk" %}
        <img src="{{ url_for('static', filename='images/walk.jpg') }}" />
        {% else %} {% if event.category_name == "Market" %}
        <img src="{{ url_for('static', filename='images/market.jpg') }}" />
        {% else %} {% if event.category_name == "Social" %}
        <img src="{{ url_for('static', filename='images/social.jpg') }}" />
        {% else %} {% if event.category_name == "Workshop" %}
        <img src="{{ url_for('static', filename='images/workshop.jpg') }}" />
        {% else %} {% if event.category_name == "Book Club" %}
        <img src="{{ url_for('static', filename='images/bookclub.jpg') }}" />
        {% endif %}
        {% endif %}
        {% endif %} {% endif %}
        {% endif %} {% endif %}{% endif %}
      </div>
        {% if event.category_name == "Cycle" %}
        <div class="event-category">Cycle</div>
        {% else %} {% if event.category_name == "Coffee" %}
        <div class="event-category">Coffee</div>
        {% else %} {% if event.category_name == "Walk" %}
        <div class="event-category">Walk</div>
        {% else %} {% if event.category_name == "Market" %}
        <div class="event-category">Market</div>
        {% else %} {% if event.category_name == "Social" %}
        <div class="event-category">Social</div>
        {% else %} {% if event.category_name == "Workshop" %}
        <div class="event-category">Workshop</div>
        {% else %} {% if event.category_name == "Book Club" %}
        <div class="event-category">Bookclub</div>
        {% endif %}
        {% endif %}
        {% endif %} {% endif %}
        {% endif %} {% endif %}{% endif %}
      <div class="card-content valign-wrapper center-align">
        <p class="event-description">{{ event.event_description }}</p>
      </div>
      <div class="card-content card-link-div center-align valign-wrapper">
      <span class="card-title activator">{{ event.event_name }}
      <i class="fas fa-plus prefix white-text tooltipped" id="event-deets"
                data-position="right" data-tooltip="Get Details"></i></span>
    </div>
      <div class="card-reveal">
      <span class="card-title card-link-div center-align">{{ event.event_name }}
      <i class="fas fa-times prefix white-text tooltipped right" id="event-deets-close"
                data-position="right" data-tooltip="Close Details"></i></span>
<p><i class="fas fa-list-ul prefix cyan-text text-accent-3 tooltipped sgl-event"
                data-position="right" data-tooltip="Event Category"></i>
                {{ event.category_name }}<br>
                <i class="fas fa-edit prefix cyan-text text-accent-3 tooltipped sgl-event"
                data-position="right" data-tooltip="Event Description"></i>
                {{ event.event_description }}<br>
                <i class="fas fa-calendar-alt prefix cyan-text text-accent-3 tooltipped sgl-event"
                data-position="right" data-tooltip="Date of Event"></i>
                {{ event.event_date }}<br>
                <i class="fas fa-clock prefix cyan-text text-accent-3 tooltipped sgl-event"
                data-position="right" data-tooltip="Time of Event"></i>
                {{ event.event_time }}<br>
                <i class="fas fa-map prefix cyan-text text-accent-3 tooltipped sgl-event"
                data-position="right" data-tooltip="Event Location"></i>
                {{ event.location }}<br>
                <i class="fas fa-map-marker-alt prefix cyan-text text-accent-3 tooltipped sgl-event"
                data-position="right" data-tooltip="Meet Point"></i>
                {{ event.meet_point }}<br>
                    {% if event.free_event == "on" %}
                    <i class="fas fa-comment-dollar cyan-text text-accent-3 tooltipped sgl-event"
                     data-position="right" data-tooltip="Free!"></i>
                    Free event!<br>
                    {% else %}
                    <i class="fas fa-comment-dollar cyan-text text-accent-3 tooltipped sgl-event"
                     data-position="right" data-tooltip="Not Free"></i> 
                    There is a charge for this event - see description<br>
                    {% endif %}
                <i class="fas fa-user prefix cyan-text text-accent-3 tooltipped sgl-event"
                data-position="right" data-tooltip="Created by user"></i>
                {{ event.created_by }}<br></p>    </div>
    </div>
  </div>
  {% endfor %}
  </ul>
  </div>
  {% else %}
  <h4 class="cyan-text text-accent-3 center-align">Sorry, no matching events found</h4>

{% endif %}   
<div class="row all-events-button">
        <div class="col s12 center-align">
          <a href="{{ url_for('get_events') }}" class="btn-large light-green accent-2 all-events-button">
        Clear Search Results<i class="fas fa-times-circle right"></i></a>
        </div>
</div>
{% endblock %}
